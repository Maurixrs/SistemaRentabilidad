@model SistemaRentabilidad.ViewModels.WsVM
@{
    ViewBag.Title = "Detalles de Planilla";
}

<head>
    <LINK REL="stylesheet" TYPE="text/css" HREF="~/Content/hover.css">
    <LINK REL="stylesheet" TYPE="text/css" HREF="~/Content/Site.css">


</head>
<style>
     legend {
        margin-bottom: 2px;
        background: khaki;
        font-size: inherit;
    }
     .full{background-size: contain}
    #resumentabla td {border-color: darkgrey;background: snow;
        line-height: 15px;
    }

    #nueva td {border-color: darkgrey;background: snow;
        line-height: 15px;
    }

    #ingresotabla td {border-color: darkgrey;background: snow;
        line-height: 15px;
    }

    #encabezadostabla td {border-color: darkgrey;
        line-height: 15px;
    }

    #costotabla td {border-color: darkgrey;background: snow;
        line-height: 15px;
    }

    #gastotabla td {border-color: darkgrey;background: snow;
        line-height: 15px;
    }

    #otrotabla td {border-color: darkgrey;background: snow;
        line-height: 15px;
    }

    #ingresotabla th {border-color: darkgrey;background: snow;
        line-height: 15px;
    }

    #costotabla th {border-color: darkgrey;background: snow;
        line-height: 15px;
    }

    #gastotabla th {border-color: darkgrey;background: snow;
        line-height: 15px;
    }

    #otrotabla th {border-color: darkgrey;background: snow;
        line-height: 15px;
    }


     #titulotabla th {border-color: darkgrey;background: darkkhaki;
        
    }
       #titulotabla td {border-color: darkgrey;background: snow;
        
    }
    #nueva th {border-color: darkgrey;background: snow;
        line-height: 15px;
    }

    #resumentabla th {border-color: darkgrey;background: snow;
        line-height: 15px;
    }

    #otrosub th {border-color: darkgrey;background: snow;
        line-height: 15px;
    }

    #encabezadostabla th {border-color: darkgrey;
        line-height: 15px;
    }

    #totalingresotabla th {border-color: darkgrey;background: snow;
        line-height: 15px;
    }

    #totalgastotabla th {border-color: darkgrey;background: snow;
        line-height: 15px;
    }

    #totalcostotabla th {border-color: darkgrey;background: snow;
        line-height: 15px;
    }

    #totalotrotabla th {border-color: darkgrey;background: snow;
        line-height: 15px;
    }
    .tipos{    font-size: medium;
        font-weight: bold;
        font-style: italic}


    .table {border-color: darkgrey;
        margin-bottom: 0px;
    }
</style>
@Html.HiddenFor(model => model.IdWorksheet)

<head>

    <link href="/Content/site.css" rel="stylesheet">
</head>
<h2 class="text-center">Detalles de Planilla</h2>
@*<input id="idw" value="@Model.IdWorksheet" />*@
@*///////////////////////////*@
<hr style="margin-top: 10px;margin-bottom: 10px;" />


<table id="titulotabla" class="table table-condensed table-bordered ">

    <thead class="tableStyle">
        <tr class="text-center tipos" >
            <th class="text-center" style="background: #77a9f9" >
                Planilla
            </th>

            <th class="text-center" style="background: #77a9f9">
                Período
            </th>
        </tr>
    </thead>
    <tbody>
        <tr style="font-weight: bold">
            <td class="text-center">
                @Html.DisplayFor(model => model.IdWorksheet)
            </td>
            <td class="text-center">
                @{
                    var month = System.Globalization.CultureInfo.CurrentUICulture.DateTimeFormat.GetMonthName(Model.Date.Month).ToUpper();


                    @Html.DisplayFor(model => month)
                    <text> &nbsp;</text>; @Model.Date.Year;

                }
            </td>
        </tr>    
    </tbody>

</table>
   <hr style="margin-top: 2px; margin-bottom: 5px; border-style: dotted" />

<table id="encabezadostabla" class="table table-condensed table-bordered " style="margin-bottom: 2px">
    <thead>
        <tr class="text-center" style="background:gainsboro">
            <th class="text-left" style="width: 40%;">
                Descripción
            </th>
            <th class="text-left" style="width: 40%">
                Observación
            </th>

            <th class="text-left" style="width: 20%">
                Monto
            </th>

        </tr>
    </thead>
</table>
<hr style="margin-top: 2px; margin-bottom: 5px; border-style: dashed" />

<legend class="thStyleGradient tipos col-lg-12">
    Ingresos
</legend>

<table id="ingresotabla" class="table table-condensed table-bordered ">

    <tbody id="ingreso">

        

        @foreach (var item in Model.Sheets)
            {
                if (item.SheetType == SistemaRentabilidad.Models.SheetType.Ingreso)
                {

                <tr>
                    <td style="width: 40%;">
                        @Html.DisplayFor(modelItem => item.SheetDescription)


                    </td>
                    <td style="width: 40%;">
                        @Html.DisplayFor(modelItem => item.Comments)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Amount)


                    </td>

                </tr>
            }
        }
    </tbody>

</table>
<table id="totalingresotabla" class="table table-condensed table-bordered " style="margin-bottom: 10px">
    <thead>
        <tr class="text-center" style="background: none">
            <th class="text-left" style="width: 40%; border-bottom: hidden; border-top: hidden;border-left:hidden">

            </th>
            <th class="text-right" style="width: 40%; font-weight: bolder;border-bottom: hidden; border-top: hidden; border-left: hidden;font-style: italic;font-size: medium;">
                Subtotal
            </th>

            <th class="text-left totalView"  id="toting">
                @Html.DisplayFor(model => model.Totali)
            </th>
            <th style="width: 2%;border-bottom: hidden; border-top: hidden;border-right:hidden">

            </th>

        </tr>
    </thead>
</table>
<hr style="margin-top: 2px; margin-bottom: 5px; border-style: dashed" />

<legend class="thStyleGradient tipos col-lg-12">
    Costos
</legend>
<table id="costotabla" class="table table-condensed table-bordered ">

    <tbody id="costo">
        
        @foreach (var item in Model.Sheets)
        {
            if (item.SheetType == SistemaRentabilidad.Models.SheetType.Costo)
            {

                <tr>
                    <td style="width: 40%;">
                        @Html.DisplayFor(modelItem => item.SheetDescription)


                    </td>
                    <td style="width: 40%;">
                        @Html.DisplayFor(modelItem => item.Comments)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Amount)


                    </td>
                    
                </tr>
            }
        }
    </tbody>

</table>
<table id="totalcostotabla" class="table table-condensed table-bordered " style="margin-bottom: 10px">
    <thead>
        <tr class="text-center" style="background: none">
            <th class="text-left" style="width: 40%; border-bottom: hidden; border-top: hidden;border-left:hidden">

            </th>
            <th class="text-right" style="width: 40%; font-weight: bolder;border-bottom: hidden; border-top: hidden; border-left: hidden;font-style: italic;font-size: medium;">
                Subtotal
            </th>

            <th class="text-left totalView"  id="totcos">
                @Html.DisplayFor(model => model.Totalc)
            </th>
            <th style="width: 2%;border-bottom: hidden; border-top: hidden;border-right:hidden">

            </th>

        </tr>
    </thead>
</table>
<hr style="margin-top: 2px; margin-bottom: 5px; border-style: dashed" />

<legend class="thStyleGradient tipos col-lg-12">
    Gastos
</legend>
<table id="gastotabla" class="table table-condensed table-bordered ">

    <tbody id="gasto">
        
        @foreach (var item in Model.Sheets)
        {
            if (item.SheetType == SistemaRentabilidad.Models.SheetType.Gasto)
            {
                <tr>
                    <td style="width: 40%;">
                        @Html.DisplayFor(modelItem => item.SheetDescription)

                    </td>
                    <td style="width: 40%;">
                        @Html.DisplayFor(modelItem => item.Comments)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Amount)


                    </td>
                    
                </tr>
            }
        }
    </tbody>

</table>
<table id="totalgastotabla" class="table table-condensed table-bordered " style="margin-bottom: 10px">
    <thead>
        <tr class="text-center" style="background: none">
            <th class="text-left" style="width: 40%; border-bottom: hidden; border-top: hidden;border-left:hidden">

            </th>
            <th class="text-right" style="width: 40%; font-weight: bolder;border-bottom: hidden; border-top: hidden; border-left: hidden;font-style: italic;font-size: medium;">
                Subtotal
            </th>

            <th class="text-left totalView"  id="totgas">
                @Html.DisplayFor(model => model.Totalg)
            </th>
            <th style="width: 2%;border-bottom: hidden; border-top: hidden;border-right:hidden">

            </th>

        </tr>
    </thead>
</table>
<hr style="margin-top: 2px; margin-bottom: 5px; border-style: dashed" />
<legend class="thStyleGradient tipos col-lg-12">
    Otros ingresos
</legend>
<table id="otrotabla" class="table table-condensed table-bordered ">

    <tbody id="otro">
        
        @foreach (var item in Model.Sheets)
        {
            if (item.SheetType == SistemaRentabilidad.Models.SheetType.OtroIngreso)
            {

                <tr>
                    <td style="width: 40%;">
                        @Html.DisplayFor(modelItem => item.SheetDescription)


                    </td>
                    <td style="width: 40%;">
                        @Html.DisplayFor(modelItem => item.Comments)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Amount)


                    </td>
                    
                </tr>
            }
        }
    </tbody>
</table>
<table id="totalotrotabla" class="table table-condensed table-bordered " style="margin-bottom: 10px">
    <thead>
        <tr class="text-center" style="background: none">
            <th class="text-left" style="width: 40%; border-bottom: hidden; border-top: hidden;border-left:hidden">

            </th>
            <th class="text-right" style="width: 40%; font-weight: bolder;border-bottom: hidden; border-top: hidden; border-left: hidden;font-style: italic;font-size: medium;">
                Subtotal
            </th>

            <th class="text-left totalView"  id="tototr">
                @Html.DisplayFor(model => model.Totalo)
            </th>
            <th style="width: 2%;border-bottom: hidden; border-top: hidden;border-right:hidden">

            </th>

        </tr>
    </thead>
</table>

<hr style="margin-top: 2px; margin-bottom: 5px; border-style: dashed" />
<legend class="tipos text-center" style="background: #77a9f9">
    <b> Resumen</b>
</legend>
<table id="resumentabla" class="table table-condensed   table-striped table-bordered ">

    <thead class="tableStyle">
        <tr class="text-center"  style="background: gainsboro">
            <td class="text-left" style="border-radius: 3px; font-weight: bold">
                Observaciones
            </td>
            <td class="text-left" style="border-radius: 3px; width: 200px; font-weight: bold">
                Total
            </td>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
                @Html.DisplayFor(model => model.Comments)


            </td>
            <td>
                @Html.DisplayFor(model => model.TotalAmount)
                <span class="text-danger" style="display: block"></span>
            </td>
        </tr>

    </tbody>

</table>

<hr style="color: grey" />
<div class="text-center">
    <a href="@Url.Action("Index","Worksheets")" class="btn btn-default btn-md"><span class="glyphicon glyphicon-hand-left " aria-hidden="true">&nbsp;Volver</span></a>
    <a href="@Url.Action("EditW","Worksheets", new { id = Model.IdWorksheet})" class="btn btn-success">Editar&nbsp;<span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></a>
    <a href="@Url.Action("Delete","Worksheets", new { id = Model.IdWorksheet, details = true})" class="btn btn-danger dialog-window">Eliminar&nbsp;<span class="glyphicon glyphicon-trash" aria-hidden="true"></span></a>
</div>
@*<a href="@Url.Action("Delete","Worksheets", new { id = Model.IdWorksheet})" data-form-method="post" class="btn btn-danger">Eliminar&nbsp;<span class="glyphicon glyphicon-trash" aria-hidden="true"></span></a>*@
<div class="modal fade" id="myModal" role="dialog"
     aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content" style="width: 90% ;left: 5%;">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title text-center">Eliminar Planilla</h4>
            </div>
            <div class="modal-body">
                <div class="te">Espere...</div>
            </div>

        </div>

    </div>

</div>
@section scripts{
    <script>
    $(document).ready(function () {
        $("body").on("click", "a.dialog-window", null, function (e) {
            e.preventDefault();

            var $link = $(this); // Reference to <a/> link
            var title = $link.text(); //this is title to fetch in htnl
            $('#myModal.modal-title').html(title);

            var url = $(this).attr('href');
            if (url.indexOf('#') == 0) {
                $('#myModal').modal('show');
            }
            else {
                $.get(url, function (data) {
                    $('#myModal .te').html(data);
                    $('#myModal').modal();
                }).success(function () { $('input:text:visible:first').focus(); });
            }
        });
    })
</script>
}


